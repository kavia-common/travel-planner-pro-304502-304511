{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React context provider for managing application state (like user authentication, trips, destinations, itinerary items, bookings, and favorites) in a travel planner frontend. It includes state initialization, a reducer for actions, several helper functions for data transformation, and a set of actions to perform CRUD operations via API calls. It also initializes state from stored user data and handles unauthorized events.", "external_files": ["../api/client", "../api/http"], "external_methods": ["api.trips.list", "api.trips.update", "api.trips.create", "api.trips.remove", "api.destinations.list", "api.destinations.update", "api.destinations.create", "api.destinations.remove", "api.itinerary.list", "api.itinerary.update", "api.itinerary.create", "api.itinerary.remove", "api.bookings.list", "api.bookings.update", "api.bookings.create", "api.bookings.remove", "api.favorites.list", "api.favorites.create", "api.favorites.remove", "getStoredUser", "onUnauthorized", "setAuthSession", "clearAuthSession"], "published": ["AppStoreProvider", "useAppStore", "useSelectedTrip"], "classes": [], "methods": [{"name": "toUiTrip(t)", "description": "Converts backend trip object to UI-friendly format.", "scope": "", "scopeKind": ""}, {"name": "fromUiTrip(draft)", "description": "Converts UI trip draft data to backend trip object.", "scope": "", "scopeKind": ""}, {"name": "toUiDestination(d)", "description": "Converts backend destination object to UI-friendly format.", "scope": "", "scopeKind": ""}, {"name": "fromUiDestination(draft)", "description": "Converts UI destination draft data to backend destination object.", "scope": "", "scopeKind": ""}, {"name": "toUiItineraryItem(i)", "description": "Converts backend itinerary item to UI format.", "scope": "", "scopeKind": ""}, {"name": "fromUiItineraryItem(draft)", "description": "Converts UI itinerary item draft to backend format.", "scope": "", "scopeKind": ""}, {"name": "toUiBooking(b)", "description": "Converts backend booking object to UI format.", "scope": "", "scopeKind": ""}, {"name": "fromUiBooking(draft)", "description": "Converts UI booking draft data to backend format.", "scope": "", "scopeKind": ""}, {"name": "AppStoreProvider({ children })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "reducer(state, action)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "useAppStore()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "useSelectedTrip(tripId)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["api.trips.list", "api.destinations.list", "api.itinerary.list", "api.bookings.list", "api.favorites.list", "api.auth.login", "api.trips.update", "api.trips.create", "api.trips.remove", "api.destinations.update", "api.destinations.create", "api.destinations.remove", "api.itinerary.update", "api.itinerary.create", "api.itinerary.remove", "api.bookings.update", "api.bookings.create", "api.bookings.remove", "api.favorites.create", "api.favorites.remove", "getStoredUser", "onUnauthorized", "setAuthSession", "clearAuthSession"], "search-terms": ["AppStoreContext", "useReducer", "useContext", "initialState", "reducer", "bootstrap", "auth", "trip", "destination", "itinerary", "booking", "favorites", "API", "state management", "React context"], "state": 2, "file_id": 17, "knowledge_revision": 95, "git_revision": "0484b7866ca97829e539e7194f819d613551efbd", "revision_history": [{"66": "0484b7866ca97829e539e7194f819d613551efbd"}, {"95": "0484b7866ca97829e539e7194f819d613551efbd"}], "ctags": [{"_type": "tag", "name": "AppStoreContext", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^const AppStoreContext = createContext(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "AppStoreProvider", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^export function AppStoreProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      auth: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.loading", "scopeKind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      auth: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.error", "scopeKind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^  auth: {$/", "language": "JavaScript", "kind": "class", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "bookings", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      bookings: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.loading", "scopeKind": "class"}, {"_type": "tag", "name": "bookings", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      bookings: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.error", "scopeKind": "class"}, {"_type": "tag", "name": "bookings", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    bookings: [],$/", "language": "JavaScript", "kind": "property", "scope": "initialState.data", "scopeKind": "class"}, {"_type": "tag", "name": "bootstrapping", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    bootstrapping: true,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^  data: {$/", "language": "JavaScript", "kind": "class", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      destinations: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.loading", "scopeKind": "class"}, {"_type": "tag", "name": "destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      destinations: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.error", "scopeKind": "class"}, {"_type": "tag", "name": "destinations", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    destinations: [],$/", "language": "JavaScript", "kind": "property", "scope": "initialState.data", "scopeKind": "class"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    error: {$/", "language": "JavaScript", "kind": "class", "scope": "initialState.status", "scopeKind": "class"}, {"_type": "tag", "name": "favorites", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      favorites: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.loading", "scopeKind": "class"}, {"_type": "tag", "name": "favorites", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      favorites: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.error", "scopeKind": "class"}, {"_type": "tag", "name": "favorites", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    favorites: [],$/", "language": "JavaScript", "kind": "property", "scope": "initialState.data", "scopeKind": "class"}, {"_type": "tag", "name": "fromUiBooking", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function fromUiBooking(draft) {$/", "language": "JavaScript", "kind": "function", "signature": "(draft)"}, {"_type": "tag", "name": "fromUiDestination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function fromUiDestination(draft) {$/", "language": "JavaScript", "kind": "function", "signature": "(draft)"}, {"_type": "tag", "name": "fromUiItineraryItem", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function fromUiItineraryItem(draft) {$/", "language": "JavaScript", "kind": "function", "signature": "(draft)"}, {"_type": "tag", "name": "fromUiTrip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function fromUiTrip(draft) {$/", "language": "JavaScript", "kind": "function", "signature": "(draft)"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^const initialState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      itinerary: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.loading", "scopeKind": "class"}, {"_type": "tag", "name": "itinerary", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      itinerary: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.error", "scopeKind": "class"}, {"_type": "tag", "name": "itineraryItems", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    itineraryItems: [],$/", "language": "JavaScript", "kind": "property", "scope": "initialState.data", "scopeKind": "class"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    loading: {$/", "language": "JavaScript", "kind": "class", "scope": "initialState.status", "scopeKind": "class"}, {"_type": "tag", "name": "reducer", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function reducer(state, action) {$/", "language": "JavaScript", "kind": "function", "signature": "(state, action)"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    status: \"anonymous\", \\/\\/ \"anonymous\" | \"authenticated\"$/", "language": "JavaScript", "kind": "property", "scope": "initialState.auth", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^  status: {$/", "language": "JavaScript", "kind": "class", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "toUiBooking", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function toUiBooking(b) {$/", "language": "JavaScript", "kind": "function", "signature": "(b)"}, {"_type": "tag", "name": "toUiDestination", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function toUiDestination(d) {$/", "language": "JavaScript", "kind": "function", "signature": "(d)"}, {"_type": "tag", "name": "toUiItineraryItem", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function toUiItineraryItem(i) {$/", "language": "JavaScript", "kind": "function", "signature": "(i)"}, {"_type": "tag", "name": "toUiTrip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^function toUiTrip(t) {$/", "language": "JavaScript", "kind": "function", "signature": "(t)"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    token: \"\", \\/\\/ stored in localStorage (source of truth), kept here for convenience$/", "language": "JavaScript", "kind": "property", "scope": "initialState.auth", "scopeKind": "class"}, {"_type": "tag", "name": "trips", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      trips: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.loading", "scopeKind": "class"}, {"_type": "tag", "name": "trips", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^      trips: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.status.error", "scopeKind": "class"}, {"_type": "tag", "name": "trips", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    trips: [],$/", "language": "JavaScript", "kind": "property", "scope": "initialState.data", "scopeKind": "class"}, {"_type": "tag", "name": "useAppStore", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^export function useAppStore() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "useSelectedTrip", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^export function useSelectedTrip(tripId) {$/", "language": "JavaScript", "kind": "function", "signature": "(tripId)"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^    user: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState.auth", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/travel-planner-pro-304502-304511/travel_planner_frontend/src/state/appStore.js", "pattern": "/^  return <AppStoreContext.Provider value={value}>{children}<\\/AppStoreContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}], "hash": "091025cf668615c9683a3aacacc5335d", "format-version": 4, "code-base-name": "travel_planner_frontend", "filename": "travel_planner_frontend/src/state/appStore.js", "fields": [{"name": "auth: false,", "scope": "initialState.status.loading", "scopeKind": "class", "description": "unavailable"}, {"name": "auth: null,", "scope": "initialState.status.error", "scopeKind": "class", "description": "unavailable"}, {"name": "bookings: false,", "scope": "initialState.status.loading", "scopeKind": "class", "description": "unavailable"}, {"name": "bookings: null,", "scope": "initialState.status.error", "scopeKind": "class", "description": "unavailable"}, {"name": "bookings: [],", "scope": "initialState.data", "scopeKind": "class", "description": "unavailable"}, {"name": "bootstrapping: true,", "scope": "initialState.status", "scopeKind": "class", "description": "unavailable"}, {"name": "destinations: false,", "scope": "initialState.status.loading", "scopeKind": "class", "description": "unavailable"}, {"name": "destinations: null,", "scope": "initialState.status.error", "scopeKind": "class", "description": "unavailable"}, {"name": "destinations: [],", "scope": "initialState.data", "scopeKind": "class", "description": "unavailable"}, {"name": "favorites: false,", "scope": "initialState.status.loading", "scopeKind": "class", "description": "unavailable"}, {"name": "favorites: null,", "scope": "initialState.status.error", "scopeKind": "class", "description": "unavailable"}, {"name": "favorites: [],", "scope": "initialState.data", "scopeKind": "class", "description": "unavailable"}, {"name": "itinerary: false,", "scope": "initialState.status.loading", "scopeKind": "class", "description": "unavailable"}, {"name": "itinerary: null,", "scope": "initialState.status.error", "scopeKind": "class", "description": "unavailable"}, {"name": "itineraryItems: [],", "scope": "initialState.data", "scopeKind": "class", "description": "unavailable"}, {"name": "status: \"anonymous\", \\/\\/ \"anonymous\" | \"authenticated\"", "scope": "initialState.auth", "scopeKind": "class", "description": "unavailable"}, {"name": "token: \"\", \\/\\/ stored in localStorage (source of truth), kept here for convenience", "scope": "initialState.auth", "scopeKind": "class", "description": "unavailable"}, {"name": "trips: false,", "scope": "initialState.status.loading", "scopeKind": "class", "description": "unavailable"}, {"name": "trips: null,", "scope": "initialState.status.error", "scopeKind": "class", "description": "unavailable"}, {"name": "trips: [],", "scope": "initialState.data", "scopeKind": "class", "description": "unavailable"}, {"name": "user: null,", "scope": "initialState.auth", "scopeKind": "class", "description": "unavailable"}, {"name": "return <AppStoreContext.Provider value={value}>{children}<\\/AppStoreContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}]}